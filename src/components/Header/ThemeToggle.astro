<button 
  id="themeToggle" 
  class="w-6 h-6 flex items-center justify-center"
  aria-label="Toggle theme"
>
  <svg width="20" height="20" fill="none" stroke="currentColor" class="sun hidden dark:block">
    <circle cx="10" cy="10" r="3" stroke-width="2"/>
    <path d="M10 1v2M10 17v2M1 10h2M17 10h2M4 4l1.5 1.5M14.5 14.5L16 16M4 16l1.5-1.5M14.5 5.5L16 4" stroke-width="2"/>
  </svg>
  <svg width="20" height="20" fill="currentColor" class="moon block dark:hidden">
    <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
  </svg>
</button>

<script>
  const theme = (() => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme');
    }
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  })();

  document.documentElement.classList[theme === 'dark' ? 'add' : 'remove']('dark');
  localStorage.setItem('theme', theme);

  document.getElementById('themeToggle')?.addEventListener('click', () => {
    const isDark = document.documentElement.classList.toggle('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
  });
</script>
